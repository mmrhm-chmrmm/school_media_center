{% extends "media_center/base.html" %}

{% block content %}
<div class="page">
  <div class="stack">
    <div class="row" style="justify-content: space-between;">
      <a class="btn secondary" href="{% url 'media_center:post_list' %}">← Назад</a>
      <span class="muted">{{ post.updated_at|date:"d.m.Y H:i" }}</span>
    </div>

    <div class="card stack">
      <h2 style="margin-bottom: 4px;">{{ post.title }}</h2>
      <div class="muted">Автор: {{ post.author.username }}</div>

      {% if post.photo %}
        <img class="thumb" src="{{ post.photo.file.url }}" alt="" style="height:auto; max-height:420px;" />
      {% endif %}

      <div style="line-height: 1.6;">
        {{ post.text|linebreaksbr }}
      </div>

      <div class="row" style="justify-content: flex-end; gap: 12px; padding-top: 6px;">
        {% if user.is_authenticated and user == post.author or user.is_staff %}
          <a class="btn secondary" href="{% url 'media_center:post_edit' post.id %}">Редактировать</a>
        {% endif %}
        {% if user.is_staff %}
          <a class="btn secondary" href="{% url 'media_center:post_delete' post.id %}">Удалить</a>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
